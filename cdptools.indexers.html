

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cdptools.indexers package &mdash; cdptools 2.0.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="cdptools.legistar_utils package" href="cdptools.legistar_utils.html" />
    <link rel="prev" title="cdptools.file_stores package" href="cdptools.file_stores.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> cdptools
          

          
          </a>

          
            
            
              <div class="version">
                2.0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="system_design.html">Backend Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#index">Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="system_design.html#id1">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="system_design.html#id3">Modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id4">Event Scrapers</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id5">File Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id6">Audio Splitters</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id7">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#speech-recognition-model">Speech Recognition Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id8">Indexers</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id9">Pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="system_design.html#id10">Why not Airflow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="transcript_formats.html">Transcript Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#index">Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="transcript_formats.html#id1">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="transcript_formats.html#id2">Formats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#format-raw">Format: Raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#format-timestamped-words">Format: Timestamped Words</a></li>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#format-timestamped-sentences">Format: Timestamped Sentences</a><ul>
<li class="toctree-l3"><a class="reference internal" href="transcript_formats.html#id3">Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployment_instructions.html">Deploying and Running CDP Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deployment_instructions.html#index">Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id2">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id4">Module Choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id5">Back-end Hosting</a></li>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id7">Configuration and Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deployment_instructions.html#id10">Local Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment_instructions.html#id11">Production Server Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id12">Running Pipelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#stable-release">Stable release</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Package modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="cdptools.html">cdptools package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="cdptools.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cdptools.audio_splitters.html">cdptools.audio_splitters package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.bin.html">cdptools.bin package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.databases.html">cdptools.databases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.dev_utils.html">cdptools.dev_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.event_scrapers.html">cdptools.event_scrapers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.file_stores.html">cdptools.file_stores package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">cdptools.indexers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.legistar_utils.html">cdptools.legistar_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.pipelines.html">cdptools.pipelines package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.research_utils.html">cdptools.research_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.sr_models.html">cdptools.sr_models package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cdptools.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdptools.html#module-cdptools.cdp_instance">cdptools.cdp_instance module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdptools.html#module-cdptools.configs">cdptools.configs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdptools.html#module-cdptools">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#deploying">Deploying</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cdptools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">cdptools</a> &raquo;</li>
        
          <li><a href="cdptools.html">cdptools package</a> &raquo;</li>
        
      <li>cdptools.indexers package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cdptools.indexers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="cdptools.legistar_utils.html" class="btn btn-neutral float-right" title="cdptools.legistar_utils package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cdptools.file_stores.html" class="btn btn-neutral float-left" title="cdptools.file_stores package" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cdptools-indexers-package">
<h1>cdptools.indexers package<a class="headerlink" href="#cdptools-indexers-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cdptools.indexers.indexer">
<span id="cdptools-indexers-indexer-module"></span><h2>cdptools.indexers.indexer module<a class="headerlink" href="#module-cdptools.indexers.indexer" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cdptools.indexers.indexer.Indexer">
<em class="property">class </em><code class="sig-prename descclassname">cdptools.indexers.indexer.</code><code class="sig-name descname">Indexer</code><a class="reference internal" href="_modules/cdptools/indexers/indexer.html#Indexer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.indexers.indexer.Indexer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Why is this not just a single function?</p>
<p>Like audio splitters, to pass arguments to the instance of the class and retain state may be useful. In this case,
while computing the scores for every meeting memory may be a constrant, or in the case where a developer wants to
artifically inflate the scores for certain events or words to highlight something that can be done on an object
instance rather than just a function instance.</p>
<dl class="method">
<dt id="cdptools.indexers.indexer.Indexer.clean_text_for_indexing">
<em class="property">static </em><code class="sig-name descname">clean_text_for_indexing</code><span class="sig-paren">(</span><em class="sig-param">raw_transcript: str</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cdptools/indexers/indexer.html#Indexer.clean_text_for_indexing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.indexers.indexer.Indexer.clean_text_for_indexing" title="Permalink to this definition">¶</a></dt>
<dd><p>Run basic cleaning operations against the raw text of the transcript.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>raw_transcript</strong> (<em>str</em>) – The raw text of a transcript as a single string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cleaned_transcript</strong> – The cleaned version of the transcript text.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cdptools.indexers.indexer.Indexer.drop_terms_from_index_below_value">
<em class="property">static </em><code class="sig-name descname">drop_terms_from_index_below_value</code><span class="sig-paren">(</span><em class="sig-param">index: Dict[str, Dict[str, float]], minimum_value_allowed: float = 0.0</em><span class="sig-paren">)</span> &#x2192; Dict[str, Dict[str, float]]<a class="reference internal" href="_modules/cdptools/indexers/indexer.html#Indexer.drop_terms_from_index_below_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.indexers.indexer.Indexer.drop_terms_from_index_below_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop any terms from an index that have a value less than or equal to the provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<em>Dict[str, Dict[str, float]]</em>) – An index dictionary, the output of an <cite>Indexer.generate_index</cite> run.</p></li>
<li><p><strong>minimum_value_allowed</strong> (<em>float</em>) – The float value that all term event values should be compared against. Any term event value less than or
equal to the received value will be dropped from the index.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cleaned_index</strong> – The cleaned index that has had values removed based off the received minimum value allowed.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, Dict[str, float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cdptools.indexers.indexer.Indexer.generate_index">
<em class="property">abstract </em><code class="sig-name descname">generate_index</code><span class="sig-paren">(</span><em class="sig-param">event_corpus_map: Dict[str, pathlib.Path], **kwargs</em><span class="sig-paren">)</span> &#x2192; Dict[str, Dict[str, float]]<a class="reference internal" href="_modules/cdptools/indexers/indexer.html#Indexer.generate_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.indexers.indexer.Indexer.generate_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an event corpus map, compute word event values that will act as a search index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event_corpus_map</strong> (<em>Dict[str, str]</em>) – A dictionary that maps event id to a local path with transcript to use for indexing.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>word_event_scores</strong> – A dictionary of values per event per word that will be stored in the CDP instance’s database and used as a
method for searching for events.</p>
<p>Example:
<a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>json
{</p>
<blockquote>
<div><dl class="simple">
<dt>”hello”: {</dt><dd><p>“15ce0a20-3688-4ebd-bf3f-24f6e8d12ad9”: 12.3781,
“3571c871-6f7d-41b5-85d1-ced0589f9220”: 56.7922,</p>
</dd>
</dl>
<p>},
“world”: {</p>
<blockquote>
<div><p>”15ce0a20-3688-4ebd-bf3f-24f6e8d12ad9”: 8.0016,
“3571c871-6f7d-41b5-85d1-ced0589f9220”: 33.9152,</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, Dict[str, float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cdptools.indexers.indexer.Indexer.get_raw_transcript">
<em class="property">static </em><code class="sig-name descname">get_raw_transcript</code><span class="sig-paren">(</span><em class="sig-param">transcipt_path: Union[str, pathlib.Path]</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cdptools/indexers/indexer.html#Indexer.get_raw_transcript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.indexers.indexer.Indexer.get_raw_transcript" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to open either a raw or annotated json transcript format and return the raw transcript as a string.
If the file format is not supported or if the data contained in the transcript does not follow the specification
a TypeError is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>transcipt_path</strong> (<em>Union[str, Path]</em>) – Path to the transcript</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>transcript</strong> – The raw text of the opened transcript.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cdptools.indexers.tfidf_indexer">
<span id="cdptools-indexers-tfidf-indexer-module"></span><h2>cdptools.indexers.tfidf_indexer module<a class="headerlink" href="#module-cdptools.indexers.tfidf_indexer" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cdptools.indexers.tfidf_indexer.DocumentDetails">
<em class="property">class </em><code class="sig-prename descclassname">cdptools.indexers.tfidf_indexer.</code><code class="sig-name descname">DocumentDetails</code><span class="sig-paren">(</span><em class="sig-param">unique_id</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cdptools/indexers/tfidf_indexer.html#DocumentDetails"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.indexers.tfidf_indexer.DocumentDetails" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p>Create new instance of DocumentDetails(unique_id, path)</p>
<dl class="method">
<dt id="cdptools.indexers.tfidf_indexer.DocumentDetails.path">
<em class="property">property </em><code class="sig-name descname">path</code><a class="headerlink" href="#cdptools.indexers.tfidf_indexer.DocumentDetails.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="cdptools.indexers.tfidf_indexer.DocumentDetails.unique_id">
<em class="property">property </em><code class="sig-name descname">unique_id</code><a class="headerlink" href="#cdptools.indexers.tfidf_indexer.DocumentDetails.unique_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cdptools.indexers.tfidf_indexer.TFIDFIndexer">
<em class="property">class </em><code class="sig-prename descclassname">cdptools.indexers.tfidf_indexer.</code><code class="sig-name descname">TFIDFIndexer</code><span class="sig-paren">(</span><em class="sig-param">max_synchronous_jobs: int = 8</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cdptools/indexers/tfidf_indexer.html#TFIDFIndexer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.indexers.tfidf_indexer.TFIDFIndexer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cdptools.indexers.indexer.Indexer" title="cdptools.indexers.indexer.Indexer"><code class="xref py py-class docutils literal notranslate"><span class="pre">cdptools.indexers.indexer.Indexer</span></code></a></p>
<dl class="method">
<dt id="cdptools.indexers.tfidf_indexer.TFIDFIndexer.generate_index">
<code class="sig-name descname">generate_index</code><span class="sig-paren">(</span><em class="sig-param">document_corpus_map: Dict[str, pathlib.Path]</em><span class="sig-paren">)</span> &#x2192; Dict[str, Dict[str, float]]<a class="reference internal" href="_modules/cdptools/indexers/tfidf_indexer.html#TFIDFIndexer.generate_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.indexers.tfidf_indexer.TFIDFIndexer.generate_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an event corpus map, compute word event values that will act as a search index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event_corpus_map</strong> (<em>Dict[str, str]</em>) – A dictionary that maps event id to a local path with transcript to use for indexing.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>word_event_scores</strong> – A dictionary of values per event per word that will be stored in the CDP instance’s database and used as a
method for searching for events.</p>
<p>Example:
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a>json
{</p>
<blockquote>
<div><dl class="simple">
<dt>”hello”: {</dt><dd><p>“15ce0a20-3688-4ebd-bf3f-24f6e8d12ad9”: 12.3781,
“3571c871-6f7d-41b5-85d1-ced0589f9220”: 56.7922,</p>
</dd>
</dl>
<p>},
“world”: {</p>
<blockquote>
<div><p>”15ce0a20-3688-4ebd-bf3f-24f6e8d12ad9”: 8.0016,
“3571c871-6f7d-41b5-85d1-ced0589f9220”: 33.9152,</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, Dict[str, float]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-cdptools.indexers">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cdptools.indexers" title="Permalink to this headline">¶</a></h2>
<p>Indexers package for cdptools.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Jackson Maxfield Brown

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>